import os ;
path-constant CWD : . ;
path-constant WORKSPACE : [ os.environ WORKSPACE ] ;

project
    :   requirements
        <debug-symbols>on
        <cxxflags>-std=c++11
        <include>$(CWD)/include
        <linkflags>-Wl,-rpath=$(WORKSPACE)/install/lib
    :   default-build debug
        <link>shared
    :   build-dir bin
    ;

use-project /myString : $(CWD)/src ;

alias dependencies :
    /myString//myString
    ;

exe main
    :   [ glob *.cpp : abandoned ]
        dependencies
    ;

explicit install ;
alias install :
    [ install dist_bin
        :   main
        :   <install-type>EXE
            <location>$(WORKSPACE)/install/bin
            <install-dependencies>on
    ]
    [ install dist_lib
        :   src
        :   <install-type>LIB
            <location>$(WORKSPACE)/install/lib
            <install-dependencies>on
    ]
    ;

